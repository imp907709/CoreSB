IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;

GO

IF SCHEMA_ID(N'dic') IS NULL EXEC(N'CREATE SCHEMA [dic];');

GO

CREATE TABLE [dic].[Business_Columns] (
    [Id_Business_Column] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [ShortName] nvarchar(max) NULL,
    [Code] nvarchar(max) NULL,
    [Status_Id] int NOT NULL,
    [Is_Use_In_Request] nvarchar(max) NULL,
    CONSTRAINT [PK_Business_Columns] PRIMARY KEY ([Id_Business_Column])
);

GO

CREATE TABLE [dic].[Business_Lines] (
    [Id_Business_Line] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [ShortName] nvarchar(max) NULL,
    [Code] nvarchar(max) NULL,
    [Status_Id] int NOT NULL,
    [Is_Use_In_Request] nvarchar(max) NULL,
    [BusinessColumnId] int NOT NULL,
    CONSTRAINT [PK_Business_Lines] PRIMARY KEY ([Id_Business_Line]),
    CONSTRAINT [FK_Business_Lines_Business_Columns_BusinessColumnId] FOREIGN KEY ([BusinessColumnId]) REFERENCES [dic].[Business_Columns] ([Id_Business_Column]) ON DELETE CASCADE
);

GO

CREATE INDEX [IX_Business_Lines_BusinessColumnId] ON [dic].[Business_Lines] ([BusinessColumnId]);

GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20190723132729_InitialCost', N'2.2.3-servicing-35854');

GO

